```
                                                                      
 ┌─────────────────────┐   ┌─────────────────────┐                    
 │     prometheus      │   │     prometheus      │                    
 └─────────────────────┘   └─────────────────────┘                    
            │                         │                               
            ▼                         ▼                               
 ┌─────────────────────┐   ┌─────────────────────┐                    
 │      forwarder      │   │      forwarder      │                    
 └─────────────────────┘   └─────────────────────┘                    
            │                         │             ┌────────────┐    
            │                         │          ┌──│downsampler ├─┐  
            └────────────┬────────────┘          │  └─┬──────────┘ ├─┐
                         │                       │    └─┬──────────┘ │
                         ▼                       ▼      └────────────┘
 ┌──── ───── ───── ───── ───── ───── ───── ───── ┐             ▲      
 │                     Kafka                     │◁────────────┘      
 └── ───── ───── ───── ───── ───── ───── ───── ──┘                    
                         △                                            
         ┌───────────────┴──┬────────────────────┐                    
         │                  │                    │                    
         ▼                  ▼                    ▼                    
  ┌────────────┐     ┌─────────────┐      ┌─────────────┐             
  │  indexer   ├─┐   │   cacher    ├─┐    │  compactor  ├─┐           
  └─┬──────────┘ ├─┐ └─┬───────────┘ ├─┐  └─┬───────────┘ ├─┐         
    └─┬──────────┘ │   └─┬───────────┘ │    └─┬───────────┘ │         
      └────────────┘     └─────────────┘      └─────────────┘         
             △                  △                    │                
             │                  │                  ┌─┘                
         ┌───┴──────────────────┘                  ▼                  
         │                                 ┌──── ───── ────┐          
         │                                 │                          
         │                                 │               │          
   ┌──────────┐               ┌───────────▷    Cassandra   │          
   │ querier  ├─┐             │            │               │          
   └─┬────────┘ ├─┐           │            │               │          
     └─┬────────┘ │◀──────────┘            └── ───── ───── ┘          
       └──────────┘                                                   
             △                                                        
             └──────────────────┐                                     
                                ▼                                     
    ┌──────────────────────────────────────────────────────┐          
    │                        PromQL                        │          
    │                       grafana                        │          
    └──────────────────────────────────────────────────────┘          
```
